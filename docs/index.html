<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=1024, user-scalable=no">

        <link rel="shortcut icon" href="./favicon.png">
        <title>presentation blue</title>


        <!-- Required stylesheet -->
        <link rel="stylesheet" media="screen" href="deckjs/core/deck.core.css">

        <!-- Extension CSS files go here. Remove or add as needed. -->
        <link rel="stylesheet" media="screen" href="deckjs/extensions/goto/deck.goto.css">
        <link rel="stylesheet" media="screen" href="deckjs/extensions/menu/deck.menu.css">
        <link rel="stylesheet" media="screen" href="deckjs/extensions/navigation/deck.navigation.css">
        <link rel="stylesheet" media="screen" href="deckjs/extensions/status/deck.status.css">
        <link rel="stylesheet" media="screen" href="deckjs/extensions/scale/deck.scale.css">

        <link rel="stylesheet" media="screen" href="deckjs/themes/style/klipse.css">

        <link rel="stylesheet" media="screen" href="deckjs/themes/transition/horizontal-slide.css">


        <link rel="stylesheet" type="text/css" href="https://storage.googleapis.com/app.klipse.tech/css/codemirror.css">

        <!-- Required Modernizr file -->
        <script src="deckjs/modernizr.custom.js"></script>
    </head>
    <body>
        <style>
        </style
        >
        <div class="deck-container">

            <pre class="hidden">
                <code class="clojure">
                  (ns my.m$macros)
                  (require '[reagent.core :as r])
                  (require '[reagent.ratom :as ratom])
                </code>
            </pre>

            <!-- slide 1  -->

            <section class="slide" id="title-slide">
                <h1>Data from Front to Back</h1>
            </section>


            <!-- slide 2  -->

            <section class="slide">
                <h2>$ whoami </h2>
                <ul style="list-style:none;">
                    <li>Niels</li>
                    <li>studied Chinese</li>
                    <li>mostly backend dev</li>
                    <li>started in banking, now energy</li>
                    <li>like to solve problems </li>
                    <li class ="slide"> Clojure </li>
                </ul>

            </section>


            <!-- slide 3 -->

            <section class="slide">
                <h2>Agenda </h2>
                <ul>
                    <div class="slide">
                        <h4>Setting the stage </h4>
                        <li>Business case</li>
                        <li>Requirements</li>
                        <li>Our solution</li>
                    </div>

                    <br>

                    <div class="slide">
                        <h4>code code code</h4>
                        <li>MQTT</li>
                        <li>Clojure</li>
                        <li>Hiccup</li>
                    </div>
                </ul>
            </section>


            <!-- slide 4 -->

            <section class="slide">
                <h2>Business Case</h2>

                <div class="slide">
                    <li>Data collection (what?)</li>
                </div>

                <div class="slide">
                    <li>Authorization management (who?)</li>
                </div>

                <div class="slide">
                    <li>Data visualization (how?)</li>
                </div>
            </section>


            <!-- slide 5 -->

            <section class="slide">
                <h2>Requirements</h2>

                <div class="slide">
                    <h4>Data collection</h4>
                    <li>some sort of hardware</li>
                    <li>high frequency high volume messaging</li>
                    <li>low power consumption</li>
                    <li>resilient vs outages</li>
                </div>
                <br>
                <div class="slide">
                    <h4>Authorization management</h4>
                    <li>facilitate data flow</li>
                    <li>but never see the data</li>
                    <li>user fully in control</li>
                    <li>some way to let user interact</li>
                </div>
                <br>
                <div class="slide">
                    <h4>Needs to scale</h4>
                    <p>system needs to handle thousands of concurrent requests without catching on fire</p>
                </div>


            </section>


            <!-- -slide 6 -->


            <section class="slide">
                <h2>Enter MQTT</h2>
                <p>
                    "MQTT is a light weight protocol that implements a client/broker architecture. Originally developed as a machine to machine protocol by IBM and is now an open protocol."
                </p>

                <div class="slide">
                    <h4> Practical use cases </h4>
                    <li> Industrial sensor monitoring (Hz, Pa, Â°C, m/s) </li>
                    <li> Medical implant monitoring (pacemakers)</li>
                    <li> Mobile, FB Messenger, Apple notifications</li>
                    <li> Home automation</li>
                </div>
                <br>
                <div class="slide">
                    <h4>in short:</h4>
                    <p>Anything machine-to-machine </p>
                </div>
            </section>



            <!-- slide 6  -->

            <section class="slide">
                <h2>HTTP versus MQTT</h2>

                <table style="width:100%">
                    <tr>
                        <th>HTTP</th>
                        <th>MQTT</th>
                    </tr>
                    <tr class="slide">
                        <td>document centric</td>
                        <td>data centric</td>

                    </tr>

                    <tr class="slide">
                        <td>request/response</td>
                        <td>publish/subscribe</td>
                    </tr>
                    <tr class="slide">
                        <td>1-1</td>
                        <td>1-to-0; 1-to-1; 1-to-n</td>
                    </tr>

                    <tr class="slide">
                        <td>text-based</td>
                        <td>binary format</td>
                    </tr>
                    <tr class="slide">
                        <td>web server</td>
                        <td>broker</td>
                    </tr>
                    <tr class="slide">
                        <td>min 18 bytes</td>
                        <td>min 2 bytes</td>
                    </tr>
                    <tr class="slide">
                        <td>/</td>
                        <td>quality of service</td>
                    </tr>
                    <tr class="slide">
                        <td>/</td>
                        <td>last will & testament</td>
                    </tr>
                </table>

                <div class="slide">
                </div>
            </section>


            <!-- slide 7 -->

            <section class="slide">
                <h2> demo </h2>
                <img src="./img/decoupling.png">
            </section>



            <section class="slide">
                <h2>Why did we choose Clojure? </h2>
                <ul>
                    <h4>in a nutshell</h4>
                    <li>dynamic</li>
                    <li>functional</li>
                    <li>immutable</li>
                    <li>simplifies concurrency</li>
                    <li>made FOR the JVM</li>
                </ul>

                <div class="slide">
                    <br>
                    <h6>Have you ever looked at any of the other JVM languages and thought, that's exciting I'd like to play with this?</h6>

                    <div>
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/Gta0JtNzTdc?start=855" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
                        <p>'Sure. Clojure. Well yeah I mean, as an old lisp guy, it's a lisp, right. And I think Rich Hickey has done some marvelous work in coming up with a clear conceptual model of how to write code that scales well. Not taking the pure functional approach of total immutability but having controlled mutability so you can have efficient datastructures but being able to reason about systems in the large, basically as if they were functional, and I think it's a really interesting mix. And of course it's a lisp so that makes it even nicer. But I realize that's not a shared taste and that's ok too.'</p>
                    </div>
                </div>

            </section>

            <section class="slide">
                <h2>Building Blocks</h2>

                <div class="slide">
                    <div class="clojure">
                        ;;everything is wrapped in a data structure
                        ;;first element is the operator
                        (+ 1 1)
                    </div>
                </div>

                <div class="slide">
                    <div class="clojure">
                        ;;functions and values are defined with def, or defn
                        (def x 3)
                        (+ x 5)
                    </div>

                    <div class="clojure">
                        ;;let's create a function
                        (defn returns-eight [params] "Functions can have a doc-string"
                        8)

                        (returns-eight)
                    </div>

                    <div class="clojure">
                        ;;parameters go in the square brackets
                        (defn returns-something [params]
                        "returns what is passed in"
                        params)

                        (returns-something 5)
                    </div>

                    <div class="clojure">
                        (defn double-it [value]
                        (* 2 value))

                        (double-it 4)
                    </div>
                </div>
            </section>


            <section class="slide">
                <h2>Collections</h2>
                <p>Most problems can be solved with four basic collections</p>
                <div class="slide">
                    <h4>Vectors</h4>
                    <div class="clojure">
                        ;;fast lookup
                        ;;support random access
                        (vector 1 2 3 4)
                    </div>
                    <div class="clojure">
                        ;;shorthand
                        [5 6 7 8]
                    </div>
                </div>
                <div class="slide">
                    <h4>Lists</h4>
                    <div class="clojure">
                        ;;cheap to add to
                        ;;singly-linked, grow at the front
                        (list 1 2 3 4)
                    </div>
                    <div class="clojure">
                        ;;shorthand
                        '(5 4 3 2)
                    </div>
                </div>
                <div class="slide">
                    <h4>Maps</h4>
                    <div class="clojure">
                        ;;can take most things as keys
                        {"x" 8, "y" 12, :a  3, "a-key" "a-value"}
                    </div>
                    <div class="slide">
                        <div class="clojure">
                            ;;can nest
                            (def nest {:name "hippo", :details {:location {:city "Amsterdam" :zoo "Artis"}
                            :comment {:d "please stop nesting"}}})
                            ;;show get-in
                            (get-in nest [])
                        </div>
                    </div>
                </div>
                <div class="slide">
                    <h4>Sets</h4>
                    <div class="clojure">
                        ;;don't like duplicates
                        #{1 2 3}
                    </div>
                </div>
                <div class="slide">
                    <div class="clojure">
                        ;;convert a list to a set
                        (def list '(1 2 2 3 3 3 4))
                        (set list);;
                    </div>
                </div>
            </section>


            <!-- slide 7 -->

            <section class="slide">
                <h2>Functions</h2>

                <div class="slide">
                    <h3>Regular function</h3>
                    <div class="clojure">
                        (def greeter
                        (fn [name]
                        (str "Hello, " name)))

                        ;;calling the function
                        (greeter "batman")

                        ""
                    </div>
                </div>

                <div class="slide">
                    <h3>Higher order function</h3>
                    <p> "A function that takes a function, or returns a function"</p>
                    <div class="clojure">
                        ;;a fn that takes 1 argument: greeting
                        ;;and returns a fn that also takes 1 argument: name

                        (def greeter-generator
                        (fn [greeting]
                        (fn [name]
                        (str greeting ", " name))))

                    </div>
                    <div class="slide">
                        <div class="clojure">
                            ;;generate some greeter functions
                            (def fr-greeter (greeter-generator "bonjour"))
                            (def jp-greeter (greeter-generator "ããã«ã¡ã¯"))
                            (fn? jp-greeter)
                        </div>
                        <div class="clojure">
                            ;;calling our generated functions
                            (jp-greeter "satoshi")
                            (fr-greeter "Pierrot")
                            ;;
                        </div>
                    </div>
                </div>
            </section>

            <!-- slide 8 -->
            <section class="slide">
                <h2>That's it! Now help me fix these tests</h2>


                <div class="slide">
                    <h4>String interop</h4>
                    <p> The dot notation is used to call methods on the host language</p>
                    <div class="clojure">
                        (def solution "answer goes here")

                        ;;don't touch this
                        (if (=  solution (.toUpperCase "bbq ribs"))
                        "correct!"
                        "not quite")
                    </div>
                </div>

                <div class="slide">
                    <h4>String interop 2</h4>
                    <p>a, b or c?</p>
                    <div class="clojure">
                        (def solution "answer goes here")

                        ;;don't touch this
                        (if (=  solution (.charAt "bbq ribs" 6))
                        "correct!"
                        "not quite")
                    </div>

                    <div class="slide">
                        <h4>String interop 3</h4>
                        <p>Chaining functions reads inside to outside: (2-outside(1-inside)</p>
                        <div class="clojure">
                            (def solution "answer goes here")

                            ;;don't touch this
                            (if (=  solution (.toUpperCase (.substring "bbq ribs" 0 3)))
                            "correct!"
                            "not quite")
                        </div>
                        <div class="slide">
                            <h4>String interop 4</h4>
                            <p>...but with
                                <a target="_blank" href="https://clojure.org/guides/threading_macros">
                                    threading macro </a> i.e. arrow notation ->, chaining starts to look like java 8 streams</p>
                            <div class="clojure">
                                (def solution "answer goes here")

                                ;;don't touch this
                                (if (=  solution (-> "bbq ribs"
                                (.replace "ribs" "sauce")
                                (.substring 4 9)
                                .toUpperCase
                                ))
                                "correct!"
                                "not quite")
                            </div>
                        </div>
            </section>

            <!-- slide 9 -->

            <section class="slide">
                <h2>Two more tests, from clojure core</h2>

                <div class="slide">
                    <h4>(filter [pred coll])</h4>
                    <p>filter takes a predicate, applies it to a collection, and returns the values for which the predicate is true.
                        <br> Hint: docs for <a target="_blank" href="http://clojuredocs.org/clojure.core/even_q">
                            (even?)</a></p>
                    <div class="clojure">
                        (def solution "answer goes here (but it's not a string)")

                        ;;don't touch this
                        (if (=  solution (filter even? [1 2 3 4 5 6 7]))
                        "correct!"
                        "not quite")
                    </div>
                </div>

                <div class="slide">
                    <h4>(frequencies [coll])</h4>
                    <p>Returns a map of distinct items in a collection with how often they appear. <br>
                        Hint: docs for <a target="_blank" href="http://clojuredocs.org/clojure.core/frequencies">
                        (frequencies) </a>
                    </p>
                    <div class="clojure">
                        (def solution {"answer goes" "here"})

                        ;;don't touch this
                        (if (=  solution (frequencies ["x" "x" "x" "y" "y" "z"]))
                        "correct!"
                        "not quite")
                    </div>
            </section>
            <!-- slide 10-->
            <!-- slide 11-->
            <!-- slide 12-->



            <section class="slide">
                <h2>HTML as data structures</h2>
                <div class="slide">
                    <code class="reagent">
                    [:h4 (str "Header")]
                    </code>
                </div>

                <div class="slide">
                    <div class="reagent">
                        (defn logged-in? [user]
                        (get user :logged-in?))

                        (def user {:name Harvey :logged-in? false})

                        [:h4 (if (logged-in? user) (str "Welcome")
                        (str "Please log in"))]
                    </div>
                </div>
            </section>

            <section class="slide">
                <h2>Wrapping up</h2>
                <h4>Links</h4>
                <ul>
                    <li>
                        <a target="_blank" href="https://www.hivemq.com/blog/how-to-get-started-with-mqtt">MQTT 101, by HiveMQ</a>
                    </li>
                    <li>
                        <a target="_blank" href="https://www.clojure.org/">clojure.org</a>
                    </li>
                    <li>
                        <a target="_blank" href="https://www.braveclojure.com/foreword/">Clojure for the Brave and True</a>
                    </li>
                    <li>
                        <a target="_blank" href="https://www.youtube.com/watch?v=P76Vbsk_3J0">Youtube: Clojure for Java Programmers</a>
                    </li>
                    <h2 class="slide">
                        <br>
                        Thanks for your attention!
                    </h1>
            </section>



            <!-- deck.status snippet -->
            <p class="deck-status" aria-role="status">
                <span class="deck-status-current"></span>
                /
                <span class="deck-status-total"></span>
            </p>

            <!-- End extension snippets. -->

                </div>

                <!-- Required JS files. -->
                <script src="deckjs/jquery.min.js"></script>
                <script src="deckjs/core/deck.core.js"></script>

                <!-- Extension JS files. Add or remove as needed. -->
                <script src="deckjs/extensions/menu/deck.menu.js"></script>
                <script src="deckjs/extensions/status/deck.status.js"></script>
                <script src="deckjs/extensions/fullscreen/deck.fullscreen.js"></script>

                <script>
                 $(function() {
                     $.deck('.slide', {
                         countNested: false
                     });
                 });
                </script>

                <script>
                 window.klipse_settings = {
                     selector: '.clojure',
                     selector_reagent: '.reagent',
                     codemirror_options_in: {
                         lineWrapping: true,
                         autoCloseBrackets: true
                     },
                     codemirror_options_out: {
                         lineWrapping: true
                     }
                 };
                </script>



                <script src="https://storage.googleapis.com/app.klipse.tech/plugin/js/klipse_plugin.js?aa1"></script>
                <!-- <script src="http://localhost:5014/plugin/js/klipse_plugin.js"></script> -->

    </body>
</html>
